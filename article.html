<!DOCTYPE html>
<htm>
    <head>
        <title>check article</title>
        <link href="https://cdn.jsdelivr.net/npm/froala-editor@latest/css/froala_editor.pkgd.min.css" rel="stylesheet" type="text/css" />

        <style>
            body{
                background-color: black;
                color:white;
            }
            /* Form container */
form {
  width: 500px;
  margin: 0 auto;
  padding: 20px;
  background-color: white;
  color:black;
}

/* Blog title input field */
#title {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 4px;
}
#summary{
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
  border: 1px solid ;
  border-radius: 4px;
}

/* Blog cover photo input field */
#cover-photo {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 4px;
}

/* Blog category select field */
#category {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 4px;
}

/* Blog content textarea */
#content {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
  border: 1px solid ;
  border-radius: 4px;
}

/* Error messages */
.error {
  color: red;
  font-size: 0.8em;
  margin-top: 5px;
}
.buto{
    background-color: blue;
    margin-top: 20px;
    padding:10px;
    font-size: 15px;
    color:white;
    border-radius: 50px;
    border:none;
   
}

/* Highlight input fields with errors */
#title.invalid, #cover-photo.invalid, #category.invalid, #content.invalid ,#summary.invalid{
  border: 1px solid red;
}

/* Show error message when input field is focused */
#title:focus + #titleError, #summary:focus + #summaryError ,#cover-photo:focus + #photoError,#category:focus + #categoryError, #content:focus + #contentError {
  display: block;
}

/* Hide error message when input field is not focused */
#title:not(:focus) + #titleError,#summary:not(:focus) + #summaryError , #cover-photo:not(:focus) + #photoError, #category:not(:focus) + #categoryError, #content:not(:focus) + #contentError {
  display: block;
}

          
         
          
          </style>
    </head>
    <body>

        <form id="myForm">
            <label for="title">Blog Title:</label>
            <input type="text" id="title" name="title">
            <div id="titleError" style="color:red;"></div>
            <label for="title">Blog summary:</label>
            <input type="text" id="summary" name="summary">
            <div id="summaryError" style="color:red;"></div>
          
            <label for="cover-photo">Blog Cover Photo:</label>
            <input type="file" id="cover-photo" name="cover-photo" >
            <div id="photoError" style="color:red;"></div>
          
            <label for="category">Choose Category:</label>
            <select id="category" name="category" >
              <option value=""></option>
              <option value="technology">Technology</option>
              <option value="fashion">Fashion</option>
              <option value="food">Food</option>
            </select>
            <div id="categoryError" style="color:red;"></div>
          
            <label for="content">Blog Content:</label>
            <textarea id="content" name="content" ></textarea>
            <div id="contentError" style="color:red;"></div>
          
            <input class="buto" type="submit" value="Add Blog">
          </form>
          
          <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.1/axios.min.js"></script>
          
          <script>
              let blogSum=document.getElementById("summary");
              let blogError=document.getElementById("summaryError");
              let titleB = document.getElementById("title");
              let coverPhotoB = document.getElementById("cover-photo");
              let categoryB = document.getElementById("category");
              let contentB = document.getElementById("content");
              let titleError = document.getElementById("titleError");
               let photoError = document.getElementById("photoError");
              let categoryError = document.getElementById("categoryError");
              let contentError = document.getElementById("contentError");
              const toBase64 = file => new Promise((resolve, reject) => {
              const reader = new FileReader();
                reader.readAsDataURL(file);
               reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
                });
            let form = document.getElementById("myForm");
            form.addEventListener("submit", validateForm);

          
           async function validateForm(event) {
              event.preventDefault();
            let coverPhotoDotor = document.getElementById("cover-photo").files[0];
            let blogSummary=blogSum.value;
            let title=titleB.value;
            let coverPhoto=coverPhotoB.value;
            let category =categoryB.value;
            let content=contentB.value;
            // console.log(title);

              if (title ==="") {
                titleError.textContent = "Blog title is required";
              } else {
                titleError.textContent = "";
              }
          if(blogSummary===""){
            blogError.textContent = "Blog summary is required";
          }
          else{
            blogError.textContent="";
          }
              if (coverPhoto ==="") {
                photoError.textContent = "Blog cover photo is required";
              } else {
                photoError.textContent = "";
              }
          
              if (category === "") {
                categoryError.textContent = "Blog category is required";
              } else {
                categoryError.textContent = "";
              }
          
              if (content ==="") {
                contentError.textContent = "Blog content is required";
              } else {
                contentError.textContent = "";
              }

              
              if(title!==""||coverPhoto !=="" ||content !== ""){
                //||category !== ""
                //||blogSummary!==""
              // let blogArticle = JSON.parse(localStorage.getItem("article")) || []
              // blogArticle.push({
              //   id:blogArticle.length +1,
              //   titleB:titleB.value,
              //   coverPhotoB:await toBase64(coverPhotoDotor),
              //   categoryB:categoryB.value,
              //   contentB:contentB.value,
              //   blogSummary:blogSum.value
                
               
              // })
              // let articleSet=localStorage.setItem("article", JSON.stringify(blogArticle))
              // console.log(blogArticle);
              // console.log(blogArticle[0].coverPhotoB);
              
              
              // let articleBlog =JSON.parse(localStorage.getItem("article")) || []
              // articleBlog.push({
              //   id:articleBlog.length +1,
              //   titleB:titleB.value,
              //   coverPhotoB:await toBase64(coverPhotoDotor),
              //   categoryB:categoryB.value,
              //   contentB:contentB.value,
              //   blogSummary:blogSum.value,
              //   comment:0,
              //   commentValue:[],
              //   blogDate: new Date().toLocaleDateString('en-US', {year: 'numeric', month: '2-digit', day: '2-digit'}),
              //  like:0,
              //  views:0
              // })
              // let articleSet=localStorage.setItem("article", JSON.stringify(articleBlog))
              // console.log(blogArticle);

              const formData = new FormData()
             
              formData.append("title", title)
              formData.append("blogSummary",blogSummary)
              formData.append("content",content )
              formData.append( "image",coverPhotoDotor)
              
              axios.post("https://iribagiza-jean.onrender.com/api/v1/blogs", formData,
              {"Content-Type": "multipart/form-data" })
              .then((res)=> console.log("response", res))
              .catch((error)=>{
                console.log("error", error)
              })
            

              
              blogSum.value="";
                titleB.value="";
                coverPhotoB.value="";
                categoryB.value = "";
                editor.html.set("");
                console.log("hello world");
            
           
            }
          }
          </script>
          <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/froala-editor@latest/js/froala_editor.pkgd.min.js"></script>
          <script>
            let editor = new FroalaEditor('#content',{heightMax:150})
          </script>

    </body>
</htm>
























